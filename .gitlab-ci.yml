image:
  name: eu.gcr.io/savannah-emr/fls-image:10-03-21-nullsafety

stages:
  - test

core_domain_tests:
  stage: test
  timeout: 5 minutes
  tags:
    - healthcloud-multi
  script:
    - flutter pub get
    - flutter analyze
    - flutter test --coverage test
    - lcov --remove coverage/lcov.info 'lib/**/*.g.dart' -o coverage/lcov.info
    - lcov --remove coverage/lcov.info 'lib/**/*.freezed.dart' -o coverage/lcov.info
    - genhtml -q -o coverage coverage/lcov.info
    - python3 check_coverage.py 
